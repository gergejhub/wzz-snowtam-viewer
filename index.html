<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WIZZ SNOWTAM Watch (Unofficial)</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <link rel="stylesheet" href="./assets/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="title">WIZZ SNOWTAM Watch</div>
      <div class="subtitle">Unofficial monitor (public web source). For operational awareness only.</div>
    </div>
    <div class="statusbar">
      <div class="pill" id="pillData">Data: <span id="dataStamp">loading…</span></div>
      <div class="pill" id="pillSrc">Source: <a id="srcLink" href="#" target="_blank" rel="noreferrer">—</a></div>
      <div class="pill">Auto-refresh: <span id="pollEvery">60s</span> (JSON updates ~10m via GitHub Actions)</div>
    </div>
  </header>

  <main class="layout">
    <section class="mapwrap">
      <div id="map"></div>
    </section>

    <aside class="sidebar">
      <div class="panel">
        <div class="panel-title">Legend</div>
        <div class="legend">
          <div class="row"><span class="dot ok"></span> OK (no valid SNOWTAM)</div>
          <div class="row"><span class="dot y"></span> Minor (RWYCC ≥ 5)</div>
          <div class="row"><span class="dot o"></span> Moderate (RWYCC 3–4 or “POOR” movement areas)</div>
          <div class="row"><span class="dot r"></span> Severe (RWYCC ≤ 2 / CLOSED / critical)</div>
          <div class="row"><span class="dot g"></span> Not loaded yet</div>
          <div class="row"><span class="dot blink"></span> Blinking = changed since previous poll</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-title">Airports</div>
        <input id="search" class="search" placeholder="Search ICAO / IATA / name…" />
        <div id="list" class="list"></div>
      </div>

      <div class="panel smallprint">
        <div class="panel-title">Disclaimer</div>
        <p>
          This tool consumes an external public web page and stores derived JSON in this repository.
          It is <b>not</b> an official AIS/NOTAM service and may be incomplete or delayed.
          Always cross-check with your official briefing sources.
        </p>
      </div>
    </aside>
  </main>

  <div id="popup" class="popup hidden" role="dialog" aria-modal="true">
    <div class="popup-card">
      <div class="popup-head">
        <div id="popupTitle" class="popup-title">—</div>
        <button id="popupClose" class="popup-close" aria-label="Close">×</button>
      </div>
      <div class="popup-meta" id="popupMeta"></div>
      <div class="popup-tabs">
        <button class="tab active" data-tab="raw">RAW</button>
        <button class="tab" data-tab="decode">Decode</button>
      </div>
      <div class="popup-body">
        <pre id="popupRaw" class="pre"></pre>
        <pre id="popupDecode" class="pre hidden"></pre>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="./assets/app.js"></script>
</body>
</html>
